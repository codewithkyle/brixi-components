export default class e extends HTMLElement{constructor(){super(),this.handleSubmit=async e=>{var o,t;if(e.preventDefault(),this.validate()){const e=new FormData(this.form),n=await fetch(location.origin+"/login/route",{method:"POST",headers:new Headers({Accept:"application/json"}),body:e}),r=await n.json();if(n.ok)if(r.success)location.reload();else for(const e in r.errors){const n=null!==(t=null===(o=this.form.querySelector(`[name="${e}"]`))||void 0===o?void 0:o.closest("[web-component]"))&&void 0!==t?t:null;n&&(null==n?void 0:n.reportError)&&n.reportError(r.errors[e])}}},this.form=this.querySelector("form")}validate(){var e,o;const t=Array.from(this.form.querySelectorAll("input-component, select-component, textarea-component, radio-group, checkbox-group, pin-component, phone-component, password-component, email-component, date-picker, date-component"));let n=!0;for(let r=0;r<t.length;r++){null===(o=null===(e=t[r])||void 0===e?void 0:e.validate())||void 0===o||o||(n=!1)}return n}connectedCallback(){this.form.addEventListener("submit",this.handleSubmit)}}